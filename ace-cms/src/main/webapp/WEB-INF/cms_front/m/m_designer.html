<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0">

    <title>会员中心--个人资料</title>

    <link href="${base}/res/AmazeUI-2.4.2/assets/css/admin.css" rel="stylesheet" type="text/css" />
    <link href="${base}/res/AmazeUI-2.4.2/assets/css/amazeui.css" rel="stylesheet" type="text/css" />

    <link href="${base}/res/css/personal.css" rel="stylesheet" type="text/css" />
    <link href="${base}/res/css/infstyle.css" rel="stylesheet" type="text/css" />
    <script src="${base}/res/AmazeUI-2.4.2/assets/js/jquery.min.js" type="text/javascript"></script>
    <script src="${base}/res/AmazeUI-2.4.2/assets/js/amazeui.js" type="text/javascript"></script>
    <script type="text/javascript">

        function updateInfo(){

            var type = $('input:radio[name=type]:checked').val();
            if(null == type || type == ''){
                $("#vldTip").html("请选择身份类型");
                return false;
            }

            var nickName = $.trim($('#nickName').val());
            if(null == nickName || nickName == ''){
                $("#vldTip").html("请输入您的昵称");
                return false;
            }

            var phone = $.trim($('#phone').val());
            if(null == phone || phone == ''){
                $("#vldTip").html("请输入您的手机号码");
                return false;
            }

            var cardNo = $.trim($('#cardNo').val());
            if(null == cardNo || cardNo == ''){
                $("#vldTip").html("请输入您的支付宝账号");
                return false;
            }


            var param = {"nickName":nickName,"phone":phone,"cardNo":cardNo,"type":type};
            $.ajax({
                url: '${base}/cms/m/o_info',
                dataType:"json",
                data:param,
                success	:function(data) {
                    if(data.msg == 'invalid'){
                        $("#vldTip").html("资料修改失败");
                        return false;
                    }
                    if(data.msg == 'ok'){
                        $("#vldTip").html("资料修改成功");
                        return false
                    }
                }
            });
        }

    </script>
</head>

<body>
<!--top-->
<#include "/cms_front/m/m_top.html"/>

<div class="center">
    <div class="col-main">
        <div class="main-wrap">

            <div class="user-info">
                <!--标题 -->
                <div class="am-cf am-padding">
                    <div class="am-fl am-cf"><strong class="am-text-danger am-text-lg">个人资料</strong> / <small>Personal&nbsp;information</small></div>
                </div>
                <hr/>

                <!--头像 -->
                <div class="user-infoPic">

                    <div class="filePic">
                       <a href="${base}/cms/m/v_avatar" title="点击更换头像">
                           <img class="am-circle am-img-thumbnail" src="${base}${loginUser.picUrl!('/res/images/getAvatar.do.jpg')}"/>
                       </a>
                    </div>

                    <p class="am-form-help">头像</p>

                    <div class="info-m">
                        <div><b>用户名：<i>${loginUser.userName!}</i></b></div>
                        <div>会员类型：<#if loginUser.type==0>普通会员</#if>
                            <#if loginUser.type==1>设计师</#if></div>
                        <div class="u-level">
									<span class="rank r2">
							             <s class="vip1"></s><a class="classes" href="#">积分：${loginUser.point!}</a>
						            </span>
                        </div>
                        <div class="u-safety">
                                金币: <span class="u-profile"><i class="bc_ee0000" style="width: 60px;" width="0">${loginUser.coin!}</i></span>
                        </div>
                    </div>
                </div>

                <!--个人信息 -->
                <div class="info-main">
                    <form class="am-form am-form-horizontal">
                        <div class="am-form-group">
                            <label class="am-form-label">身份类型</label>
                            <div class="am-form-content sex">
                                <label class="am-radio-inline">
                                    <input type="radio" name="type" id="type" value="0" <#if loginUser.type==0>checked</#if> />&nbsp;普通会员
                                </label>
                                <label class="am-radio-inline">
                                    <input type="radio" name="type" id="type" value="1" <#if loginUser.type==1>checked</#if>/>&nbsp;设计师
                                </label>
                            </div>
                        </div>

                        <div class="am-form-group">
                            <label for="nickName" class="am-form-label">真实姓名</label>
                            <div class="am-form-content">
                                <input id="nickName" name="nickName" placeholder="真实姓名" value="${loginUser.nickName!}" type="tel">
                            </div>
                        </div>
                        <div class="am-form-group">
                            <label for="phone" class="am-form-label">手机号码</label>
                            <div class="am-form-content">
                                <input id="phone" name="phone" placeholder="手机号码" value="${loginUser.phone!}" type="tel">
                            </div>
                        </div>
                        <div class="am-form-group">
                            <label for="cardNo" class="am-form-label">支付宝账户</label>
                            <div class="am-form-content">
                                <input id="cardNo" name="cardNo" placeholder="支付宝账户" value="${loginUser.cardNo!}" type="email">
                            </div>
                        </div>
                        <div class="info-btn">
                            <div class="am-btn am-btn-danger" onclick="updateInfo()">确定修改</div>
                        </div>

                        <div class="am-form-group">
                            <label for="cardNo" class="am-form-label"></label>
                            <div class="am-form-content">
                                <span style="font-weight: bold;color: green" id="vldTip"></span>
                            </div>
                        </div>
                    </form>
                </div>

            </div>

        </div>
        <!--底部-->
        <!--底部-->
        <#include "/cms_front/m/m_bottom.html"/>
    </div>

    <!-- menu -->
    <#include "/cms_front/m/m_menu.html"/>
</div>

</body>
</html>